
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>fatiando.datasets.from_image &#8212; Fatiando dev</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/gallery.css" type="text/css" />
    <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="stylesheet" href="../_static/font-awesome/css/font-awesome.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     'ac2afbcb2d99b18f145cc1ed40075beb5f92dd5a',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="fatiando.seismic.RickerWavelet" href="fatiando.seismic.RickerWavelet.html" />
    <link rel="prev" title="fatiando.datasets.fetch_hawaii_gravity" href="fatiando.datasets.fetch_hawaii_gravity.html" />

    
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">


    <meta name="twitter:card" content="summary">
    <meta name="twitter:image" content="http://www.fatiando.org/_static/fatiando-logo.png">
    <meta name="twitter:site" content="@leouieda">
    <meta name="twitter:title" content="Fatiando a Terra">
    <meta name="twitter:description" content="Open-source Python library for geophysics">

    <meta property="og:title" content="Fatiando a Terra">
    <meta property="og:type" content="website">
    <meta property="og:url" content="http://www.fatiando.org/">
    <meta property="og:site_name" content="Fatiando a Terra">
    <meta property="og:image" content="http://www.fatiando.org/_static/fatiando-logo.png">
    <meta property="og:description" content="Open-source Python library for geophysics">

    <!-- Google Analytics -->
    <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-38125837-1', 'auto');
    ga('send', 'pageview');
    </script>


  </head>
  <body>

    
        <div class="container-fluid" style="margin: 0px; padding: 0px;">
            <div class="alert alert-dismissible alert-warning text-center dev-version-warning">
                <button type="button" class="close" data-dismiss="alert">×</button>
                This page reflects the <strong>development version</strong>
                (<a href="https://github.com/fatiando/fatiando"><em>master</em> branch
                  on Github</a>).
                Go to <a href="http://www.fatiando.org">fatiando.org</a> for the latest
                release.
            </div>
        </div>
    

    


    
<div class="container-fluid menu text-center">
    <div class="col-lg-3 menu-brand">
        <a class="" href="../index.html">
            
                <img src="../_static/fatiando-navbar-logo.png">
            
            
                fatiando
            
        </a>
        <span class="menu-version">dev</span>
    </div>
    <div class="col-lg-6 menu-list">
        <ul>
            
                    <li><a href="../install.html">Install</a></li>
                    <li><a href="../gallery/index.html">Gallery</a></li>
                    <li><a href="../api.html">API</a></li>
                    <li><a href="../docs.html">Docs</a></li>
                    <li><a href="../develop.html">Contribute</a></li>
                    <li><a href="../cite.html">Cite</a></li>
                    <li><a href="https://github.com/fatiando/fatiando"><i class="fa fa-github fa-lg" title="Source code on Github"></i></a></li>
            
        </ul>
    </div>
    <div class="col-lg-3 menu-search">
        
            
<form class="navbar-form" action="../search.html" method="get">
    <div class="form-group">
        <input type="text" name="q" class="form-control" placeholder="Search" />
    </div>
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
</form>
        
    </div>
</div>


    

        <div class="container page-container">
            <div class="row">
                
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><ul>
<li><a class="reference internal" href="#"><code class="docutils literal"><span class="pre">fatiando.datasets</span></code>.from_image</a></li>
</ul>

        </div>
      </div>
                <div class="col-md-9 content">
                    <div class="section" id="fatiando-datasets-from-image">
<h1><a class="reference internal" href="../api.html#module-fatiando.datasets" title="fatiando.datasets"><code class="xref py py-mod docutils literal"><span class="pre">fatiando.datasets</span></code></a>.from_image<a class="headerlink" href="#fatiando-datasets-from-image" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="fatiando.datasets.from_image">
<code class="descclassname">fatiando.datasets.</code><code class="descname">from_image</code><span class="sig-paren">(</span><em>fname</em>, <em>pixel_thresh=10</em>, <em>return_colors=False</em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/fatiando/datasets/image.html#from_image"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#fatiando.datasets.from_image" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a model template from an image file.</p>
<p>The template is a 2D array with integers encoding each different color of
an image. The numbers are ordered by the number of pixels each color has.
So the most abundant color will be assigned the value 0.</p>
<p>The template can be used to create a model by replacing the each integer
with the desired physical property value, for example
<code class="docutils literal"><span class="pre">model</span> <span class="pre">=</span> <span class="pre">template.copy();</span> <span class="pre">model[template</span> <span class="pre">==</span> <span class="pre">0]</span> <span class="pre">=</span> <span class="pre">2670</span></code>.</p>
<p>A few tips for better results:</p>
<ul class="simple">
<li>Use images with a few sharp colors.</li>
<li>Avoid smoothing effects because they create a gradient of colors, so each
color in the gradient will be flagged as a unique value in the template.</li>
<li>When scaling an image, use nearest neighbors interpolation.</li>
<li>Use the “pencil” tool to draw the image rather than the “brush” tool to
avoid color gradients.</li>
</ul>
<p>Parameters:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt>fname <span class="classifier-delimiter">:</span> <span class="classifier">string</span></dt>
<dd>The name of the image file. Can be any format supported by the Python
imaging library, though PNG is recommended.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>pixel_thresh <span class="classifier-delimiter">:</span> <span class="classifier">int</span></dt>
<dd>Colors with less pixels than <em>pixel_thresh</em> will be ignored in the
template. They will be assigned the value 0.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>return_colors <span class="classifier-delimiter">:</span> <span class="classifier">True or False</span></dt>
<dd>If True, will return a list of the colors corresponding to each value
of the template.</dd>
</dl>
</li>
</ul>
<p>Returns:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt>template <span class="classifier-delimiter">:</span> <span class="classifier">2D array</span></dt>
<dd>The image but replacing the colors with integers starting from 0.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>colors <span class="classifier-delimiter">:</span> <span class="classifier">list</span></dt>
<dd>List of the colors corresponding to each value of the template. Colors
are tuples of RGBA values.</dd>
</dl>
</li>
</ul>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">fatiando.datasets</span> <span class="k">as</span> <span class="nn">ds</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">template</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">from_image</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">SAMPLE_IMAGE_SMALL</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">template</span><span class="p">)</span>
<span class="go">[[2 2 2 2 2 2 2 0 0 3 0 0 0 2 2 2 2 2 2 2]</span>
<span class="go"> [2 2 2 2 2 1 1 0 3 3 0 0 0 1 1 2 2 2 2 2]</span>
<span class="go"> [2 2 2 2 1 0 0 0 0 0 0 0 0 0 0 0 1 2 2 2]</span>
<span class="go"> [2 2 1 1 0 0 0 0 0 0 0 0 0 1 1 1 1 1 2 2]</span>
<span class="go"> [2 2 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 2 2]</span>
<span class="go"> [2 1 0 0 0 0 0 0 0 0 0 0 0 1 1 1 1 1 1 2]</span>
<span class="go"> [2 0 1 0 1 1 0 0 0 0 0 0 0 0 1 1 1 1 1 2]</span>
<span class="go"> [0 0 0 1 1 1 1 0 0 0 0 0 0 0 0 0 0 1 1 1]</span>
<span class="go"> [0 0 0 1 1 1 1 1 1 1 0 0 0 0 0 0 0 1 1 1]</span>
<span class="go"> [0 0 0 1 1 1 1 1 1 0 0 0 0 0 0 0 0 1 1 1]</span>
<span class="go"> [0 0 0 1 1 1 1 1 1 0 0 0 0 0 0 0 0 1 1 1]</span>
<span class="go"> [0 0 0 0 1 1 1 1 0 0 0 0 0 0 0 0 0 1 1 1]</span>
<span class="go"> [0 0 0 0 0 1 1 1 0 0 0 0 0 0 0 0 0 1 1 1]</span>
<span class="go"> [2 0 0 0 0 1 1 0 0 0 0 0 0 0 0 0 0 1 0 2]</span>
<span class="go"> [2 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 0 2]</span>
<span class="go"> [2 2 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 0 2 2]</span>
<span class="go"> [2 2 0 0 0 0 1 0 0 0 0 0 0 0 0 0 0 0 2 2]</span>
<span class="go"> [2 2 2 0 0 0 0 0 0 0 0 0 0 0 0 0 0 2 2 2]</span>
<span class="go"> [2 2 2 2 2 0 0 0 3 0 0 0 0 0 0 2 2 2 2 2]</span>
<span class="go"> [2 2 2 2 2 2 2 3 3 3 3 3 3 2 2 2 2 2 2 2]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># If you squint you can see the Earth in there. (Sure you can, right?)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># Assign physical properties to each value in the template, use numpy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># fancy/boolean indexing.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span> <span class="o">=</span> <span class="n">template</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="p">[</span><span class="n">template</span><span class="o">==</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="p">[</span><span class="n">template</span><span class="o">==</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">model</span><span class="p">[</span><span class="n">template</span><span class="o">==</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="mi">8</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">model</span><span class="p">)</span>
<span class="go">[[8 8 8 8 8 8 8 1 1 3 1 1 1 8 8 8 8 8 8 8]</span>
<span class="go"> [8 8 8 8 8 0 0 1 3 3 1 1 1 0 0 8 8 8 8 8]</span>
<span class="go"> [8 8 8 8 0 1 1 1 1 1 1 1 1 1 1 1 0 8 8 8]</span>
<span class="go"> [8 8 0 0 1 1 1 1 1 1 1 1 1 0 0 0 0 0 8 8]</span>
<span class="go"> [8 8 1 1 1 1 1 1 1 1 1 1 1 0 0 0 0 0 8 8]</span>
<span class="go"> [8 0 1 1 1 1 1 1 1 1 1 1 1 0 0 0 0 0 0 8]</span>
<span class="go"> [8 1 0 1 0 0 1 1 1 1 1 1 1 1 0 0 0 0 0 8]</span>
<span class="go"> [1 1 1 0 0 0 0 1 1 1 1 1 1 1 1 1 1 0 0 0]</span>
<span class="go"> [1 1 1 0 0 0 0 0 0 0 1 1 1 1 1 1 1 0 0 0]</span>
<span class="go"> [1 1 1 0 0 0 0 0 0 1 1 1 1 1 1 1 1 0 0 0]</span>
<span class="go"> [1 1 1 0 0 0 0 0 0 1 1 1 1 1 1 1 1 0 0 0]</span>
<span class="go"> [1 1 1 1 0 0 0 0 1 1 1 1 1 1 1 1 1 0 0 0]</span>
<span class="go"> [1 1 1 1 1 0 0 0 1 1 1 1 1 1 1 1 1 0 0 0]</span>
<span class="go"> [8 1 1 1 1 0 0 1 1 1 1 1 1 1 1 1 1 0 1 8]</span>
<span class="go"> [8 1 1 1 1 0 1 1 1 1 1 1 1 1 1 1 1 1 1 8]</span>
<span class="go"> [8 8 1 1 1 0 1 1 1 1 1 1 1 1 1 1 1 1 8 8]</span>
<span class="go"> [8 8 1 1 1 1 0 1 1 1 1 1 1 1 1 1 1 1 8 8]</span>
<span class="go"> [8 8 8 1 1 1 1 1 1 1 1 1 1 1 1 1 1 8 8 8]</span>
<span class="go"> [8 8 8 8 8 1 1 1 3 1 1 1 1 1 1 8 8 8 8 8]</span>
<span class="go"> [8 8 8 8 8 8 8 3 3 3 3 3 3 8 8 8 8 8 8 8]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># You can see the colors that make up the image as well</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">template</span><span class="p">,</span> <span class="n">colors</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">from_image</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">SAMPLE_IMAGE_SMALL</span><span class="p">,</span>
<span class="gp">... </span>                                 <span class="n">return_colors</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">print</span><span class="p">(</span><span class="n">colors</span><span class="p">)</span>
<span class="go">[[  0   0 255 255]</span>
<span class="go"> [  0 255   0 255]</span>
<span class="go"> [123 123 123 255]</span>
<span class="go"> [255 255 255 255]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># The colors are RGBA values from 0-255.</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># The most abundant color is a blue (255 in the third column),</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c1"># followed by a green, a grey, and finally a white.</span>
</pre></div>
</div>
</dd></dl>

</div>

                </div>
                  
            </div>
        </div>

    


    <footer class="footer">
        <div class="container">
            <p class="pull-right">
                <a href="#">Back to top</a>
                
                    <br/>
                    
<div id="sourcelink">
  <a href="../_sources/api/fatiando.datasets.from_image.rst.txt"
     rel="nofollow">Source</a>
</div>
                
            </p>

            <p class="text-center">
                &copy; Copyright 2010-2018, Leonardo Uieda.
                Created using <a
                    href="http://sphinx-doc.org/">Sphinx</a> 1.6.7.
            </p>
        </div>
    </footer>


  </body>
</html>